<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

<aside class="newsfeed card p-4">
  <h2 class="card-title mb-3">Fil d'actualité</h2>

  <!-- Loading spinner -->
  <div *ngIf="isLoading" class="d-flex justify-content-center my-3">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
  </div>

  <!-- News items list -->
  <ul class="list-unstyled mb-0" *ngIf="!isLoading">
    <ng-container *ngIf="newsItems.length > 0; else noNews">
      <app-newsfeed-card
        *ngFor="let item of filteredUniqueNewsItems; trackBy: trackByNewsItem"
        [text]="item.text"
        [courseId]="item.courseId"
        [courseCode]="item.courseCode || ''"
        [contentTitle]="item.contentTitle || ''"
        [date]="item.date"
        [contentId]="item.contentId || ''"
        [type]="item.type || ''">
      </app-newsfeed-card>
    </ng-container>
    <ng-template #noNews>
      <li class="text-muted text-center py-3">
        <i class="bi bi-inbox-fill me-2"></i>
        Aucune actualité disponible.
      </li>
    </ng-template>
  </ul>
</aside>
