{% extends 'base.html.twig' %}

{% block title %}
    <!-- Définition du titre de la page, basé sur une variable Twig -->
    {{ variableTitre }}
{% endblock %}

{% block stylesheets %}
    <!-- Inclusion des feuilles de style spécifiques à l'administration -->
    <link rel="stylesheet" href="{{ asset('Styles/Admin.css') }}"> <!-- Fichier CSS principal pour l'administration -->
    <link rel="stylesheet" href="{{ asset('Styles/Header.css') }}"> <!-- Fichier CSS pour le header -->
{% endblock %}

{% block javascripts %}
    <!-- Inclusion des scripts JavaScript spécifiques à l'administration -->
    <script src="{{ asset('Scripts/AdminScript.js') }}" defer></script> <!-- Fichier JS principal pour l'administration -->
{% endblock %}

{% block body %}
    <main>
        <h1>Page d'administration</h1>
        <section id="catalogue">
            <h2>Catalogue</h2>
            <!-- Navigation entre les différentes sections (onglets) -->
            <div class="tabs">
                <!-- Bouton pour afficher la liste des utilisateurs -->
                <button class="tab-button" data-tab="users">Utilisateurs</button>
                <!-- Bouton pour afficher la liste des UEs -->
                <button class="tab-button" data-tab="ues">UE</button>
                <!-- Lien pour accéder à la page d'assignation des utilisateurs aux UEs -->
                <a href="{{ path('admin_assign_ue_user') }}" class="tab-button" id="assign-ue-user">Assigner des utilisateurs</a>
            </div>

            <!-- Contenu de l'onglet "Utilisateurs" -->
            <div class="tab-content" id="users-tab">
                <h3>Liste des utilisateurs</h3>
                <!-- Bouton pour ouvrir le formulaire de création d'un utilisateur -->
                <button class="tab-button" id="create-user">Créer un utilisateur</button>
                <ul id="user-list">
                    <!-- Boucle pour afficher la liste des utilisateurs -->
                    {% for user in users %}
                        <li id="user-{{ user.id }}">
                            <!-- Affichage des informations de l'utilisateur -->
                            {{ user.Prenom }} {{ user.Nom }} - {{ user.email }}
                            <!-- Bouton pour supprimer un utilisateur -->
                            <button class="delete-user-button" data-id="{{ user.id }}">Supprimer</button>
                            <!-- Bouton pour modifier un utilisateur -->
                            <button class="edit-user-button" data-id="{{ user.id }}">Modifier</button>
                        </li>
                    {% else %}
                        <!-- Message affiché si aucun utilisateur n'est trouvé -->
                        <li>Aucun utilisateur trouvé.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Contenu de l'onglet "UE" -->
            <div class="tab-content" id="ues-tab" style="display: none;">
                <h3>Liste des UE</h3>
                <!-- Bouton pour ouvrir le formulaire de création d'une UE -->
                <button class="tab-button" id="create-ue">Créer une UE</button>
                <ul id="ue-list">
                    <!-- Boucle pour afficher la liste des UEs -->
                    {% for ue in ues %}
                        <li id="ue-{{ ue.id }}">
                            <!-- Affichage des informations de l'UE -->
                            {{ ue.code }}
                            <!-- Bouton pour modifier une UE -->
                            <button class="edit-ue-button" data-id="{{ ue.id }}">Modifier</button>
                            <!-- Bouton pour supprimer une UE -->
                            <button class="delete-ue-button" data-id="{{ ue.id }}">Supprimer</button>
                        </li>
                    {% else %}
                        <!-- Message affiché si aucune UE n'est trouvée -->
                        <li>Aucune UE trouvée.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Zone où les formulaires Symfony seront insérés dynamiquement -->
            <div id="creation-zone">
                {% if form is defined %}
                    <!-- Début du formulaire Symfony -->
                    {{ form_start(form) }}
                    <!-- Affichage des champs du formulaire -->
                    {{ form_widget(form) }}
                    <!-- Bouton pour soumettre le formulaire -->
                    <button type="submit" class="sub-button">Enregistrer</button>
                    <!-- Fin du formulaire Symfony -->
                    {{ form_end(form) }}
                {% endif %}
            </div>
        </section>
    </main>
{% endblock %}